<nav class="navbar navbar-expand-md navbar-light bg-light fixed-top">
    <a class="navbar-brand" href="#">Parent Portal</a>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarsExampleDefault">
        <ul class="navbar-nav mr-auto">
            <li class="nav-item active" ng-repeat="p in ctrl.model.urls">
                <a ui-sref="{{p.url}}" ui-sref-active="active" class="nav-link"><i class="icon" ng-class="p.icon" ng-if="p.icon"></i> {{p.displayName}} <span class="sr-only">(current)</span></a>
            </li>
            <li class="nav-item active">
                <a ui-sref="app.privacypolicy" ui-sref-active="active" class="nav-link"><i class="icon ion-md-lock"></i> {{'Privacy Policy' | translate}} <span class="sr-only">(current)</span></a>
            </li>
            <!--<li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="https://example.com" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
                <div class="dropdown-menu" aria-labelledby="dropdown01">
                    <a class="dropdown-item" href="#">Action</a>
                    <a class="dropdown-item" href="#">Another action</a>
                    <a class="dropdown-item" href="#">Something else here</a>
                </div>
            </li>-->
        </ul>
        <language-chooser></language-chooser>
        <ul class="navbar-nav">
            <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="http://example.com" id="dropdown" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Welcome, {{ctrl.name}} <i class="icon ion-md-person"></i></a>
                 <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdown">
                    <a class="dropdown-item" href="#" ng-click="ctrl.logOutSSO()"><i class="icon ion-md-unlock"></i> Log out</a>
                    <a class="dropdown-item" ui-sref="app.userProfile" ui-sref-active="active"><i class="icon ion-md-person"></i> Profile</a>
                    <a ng-if="ctrl.role == 'Parent'" class="dropdown-item" ui-sref="app.alert" ui-sref-active="active"><i class="icon ion-md-cog"></i> Alerts Config</a>
                </div>
            </li>
        </ul>
    </div>
    <div class="dropdown m-r-5">
        <a class="position-relative rounded-circle w-40px h-40px btn btn-fill-help" tooltip-placement="bottom" data-toggle="dropdown" uib-tooltip="{{'UnreadMessageTooltip' | translate}}">
            <i class="ion ion-md-chatboxes"></i>
            <div class="bubble-counter" ng-class="{'orange' : ctrl.recipientUnreadMessages.unreadMessagesCount > 0, 'blue' : ctrl.recipientUnreadMessages.unreadMessagesCount == 0}">{{ctrl.recipientUnreadMessages.unreadMessagesCount}}</div>
        </a>
        <div class="dropdown-menu dropdown-menu-right p-0">
            <div class="p-l-10 alert-info f-s-16 unread-message-item text-center">{{ctrl.recipientUnreadMessages.unreadMessagesCount + ' ' + ('New Messages' | translate)  }}</div>
                <a ng-repeat="m in ctrl.recipientUnreadMessages.unreadMessages" ui-sref="app.communications({studentUsi: m.studentUsi })" class="d-flex p-l-10 p-t-10 p-b-10 p-r-5 unread-message-item">
                    <div class="position-relative rounded-circle w-40px h-40px m-r-10">
                        <div class="image-container w-40px h-40px position-relative">
                            <img alt="" ng-src="{{m.imageUrl}}">
                        </div>
                        <div ng-if="m.unreadMessageCount > 0" class="bubble-counter blue">{{m.unreadMessageCount}}</div>
                    </div>
                    <div class="message-container">
                        <div class="d-flex flex-row justify-content-between align-items-center f-s-13"> <b class="w-120px text-ellipsis overflow-hidden"> {{m.studentName}} </b></div>
                    </div>
                </a>
                <div class="text-center" ng-if="ctrl.recipientUnreadMessages.unreadMessagesCount == 0">{{'No unread Messages' | translate}}</div>
            <a ui-sref="app.communications()" class="d-flex justify-content-center align-items-center m-0 p-1 unread-light-font">{{'See all' | translate}}</a>
        </div>
    </div>
    <div class="dropdown">
        <a class="btn btn-fill-help"
           id="dropdown"
           data-toggle="dropdown"
           aria-haspopup="true"
           aria-expanded="false"
           tooltip-placement="bottom"
           uib-tooltip="{{'HelpTooltip' | translate}}">
            <i class="ion ion-md-help"></i>
        </a>
        <div aria-labelledby="dropdown02" class="dropdown-menu dropdown-menu-right">
            <button class="dropdown-item" type="button" ng-click="ctrl.showFeedbackModal()"> {{'Feedback' | translate}}</button>
            <button class="dropdown-item" type="button" ng-click="ctrl.goToExternalUrl()"> {{'Help' | translate}}</button>
        </div>
    </div>
</nav>